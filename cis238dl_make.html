<h1 id="building-software-with-make">Building Software with Make</h1>

<p>Sometimes the program you need is only available as source code. Building programs from source is a useful skill and will give you a better appreciation for the package management system.</p>

<h2 id="assignment-objectives">Assignment Objectives</h2>

<p>In This assignment you will build GNU Hello from the source code.</p>

<p><em>After successfully completing this assignment You will be able to:</em></p>

<ul>
<li>Configure a build environment for <code>make</code>.</li>
<li>Compile a program with GNU GCC.</li>
<li>Build and install a program with <code>make</code>.</li>
<li>Describe the advantages of putting sources code in <code>/usr/local/src</code>.</li>
<li>Uninstall a program using <code>make</code>.  </li>
</ul>

<h2 id="terms-you-should-know">Terms You Should Know</h2>

<p>Tarball <br>
GCC <br>
configure <br>
make <br>
Makefile <br>
Dependacy Hell</p>

<h2 id="preparation">Preparation</h2>

<p>USe the CentOS 7 ova for this assignment.</p>

<h3 id="download-the-tarball">Download the Tarball</h3>

<p>After booting the virtual machine change to the <code>/usr/local/src</code> directory. This is a good place to build software since <code>/usr/local/</code> won't be touched by the package management system and can be easily backed up.</p>

<pre><code># cd /usr/local/src
# curl -O http://ftp.gnu.org/gnu/hello/hello-2.10.tar.gz
</code></pre>

<h3 id="extract-the-tarball">Extract the Tarball</h3>

<p>Extracting the tarball will create a new directory named <strong>hello-2.10</strong> containing the file from the archive.</p>

<pre><code># tar xvzf hello-2.10.tar.gz
# cd hello-210/
</code></pre>

<h3 id="readme-and-install">README and INSTALL</h3>

<p><img src="https://raw.githubusercontent.com/dkibbe/dkibbe.github.io/master/images/cis238dl_make-4.png" alt="Screenshot of hello-2.10 directory" title=""></p>

<p>The <code>hello-2.10</code> directory contains two files that you should read first. Failing to read these files may result in failure to compile or an installation that doesn't have the features you want.</p>

<dl>
<dt>README</dt>
<dd>
<p>Contains information about the program and may include install instructions if no INSTALL file exists.</p>
</dd>

<dt>INSTALL</dt>
<dd>
<p>The INSTALL file lists the commands that should be run to install the program.</p>
</dd>
</dl>

<h3 id="configure">Configure</h3>

<p>Running the <code>configure</code> script will test that everything exists on the system needed to compile the program.</p>

<p><img src="https://raw.githubusercontent.com/dkibbe/dkibbe.github.io/master/images/cis238dl_make-1.png" alt="Configure screenshot" title=""></p>

<h3 id="install-the-compiler">Install the Compiler</h3>

<p>Our first run of <code>configure</code> shows that a GCC compiler is not installed so  <code>configure</code> exists without further checking.</p>

<pre><code># yum install gcc
</code></pre>

<p>Rerun <code>./configure</code> and it should complete with an exit code of <strong>0</strong> indicating that everything needed to compile the program is on the system.</p>

<h2 id="build-the-software">Build the Software</h2>

<p>The <code>make</code> command will build the software package once all the dependencies are met. Be sure to run the command from the same directory as <code>configure</code>.</p>

<pre><code># make
</code></pre>

<p>If <code>make</code> is successful you will have the new <code>hello</code> program in the current directory.</p>

<p><img src="https://raw.githubusercontent.com/dkibbe/dkibbe.github.io/master/images/cis238dl_make-2.png" alt="Screenshot of directory showing hello executable." title=""></p>

<h3 id="test-the-executable">Test the Executable</h3>

<p>The <code>make check</code> command runs some basic checks on the new program. </p>

<pre><code># make check
</code></pre>

<p>The program can be run in the current directory to try it out before installing.</p>

<pre><code>$ ./hello
</code></pre>

<h3 id="install-the-program-and-related-files">Install the Program and Related Files</h3>

<pre><code># make install
</code></pre>

<h3 id="run-the-program">Run the Program</h3>

<p>The program is now installed and can be run by any user.</p>

<pre><code>$ hello
$ man hello
</code></pre>

<h3 id="remove-the-software">Remove the Software</h3>

<p>You can remove the program by running <code>make uninstall</code> from the same directory.</p>



<h2 id="what-to-submit">What to Submit</h2>

<p>Submit a Screenshot of the output of <code>man hello</code>.</p>

<p><img src="https://raw.githubusercontent.com/dkibbe/dkibbe.github.io/master/images/cis238dl_make-3.png" alt="Sample submission" title=""></p>



<h2 id="resources">Resources</h2>

<blockquote>
  <p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p>
</blockquote>