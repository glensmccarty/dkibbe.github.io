<h1 id="bash-functions">Bash Functions</h1>



<h2 id="introduction">Introduction</h2>

<p>A <strong>function</strong> is a script within a script. Using functions in your scripts makes the script cleaner. A function can contain any commands you can place in a script.</p>



<h2 id="terms-and-concepts">Terms and Concepts</h2>

<ul>
<li>declare (-f, -F)</li>
<li>function name()</li>
<li>source (.)</li>
<li>unset -f <em>function name</em></li>
</ul>



<h2 id="order-of-precedence">Order of Precedence</h2>

<p>Commands are run in this order:</p>

<ol>
<li>Aliases</li>
<li>Keywords</li>
<li>Functions</li>
<li>Scripts &amp; Programs</li>
</ol>



<h2 id="create-first-function">Create First Function</h2>

<p>#!/usr/bin/env bash</p>

<p># Date: Today <br>
  # Author: Tux Penguin <br>
  # Purpose: Demo functions</p>

<p>function showdate() { <br>
    date +%F <br>
    }</p>

<pre><code>function showtime() {
  date +%r
}

function getname() {
  clear
  echo Please type your first and last name
  read firstname lastname
  echo $firstname $lastname, Nice to meet you
}

# END
</code></pre>

<!--&#10;&#10;    function twain() {&#10;&#10;    for twain in $(ls marktwain*.ogg)&#10;    do&#10;      ogg123 $twain&#10;    done&#10;-->



<h2 id="source-the-script">Source the Script</h2>

<p>When a script is called directly either with <code>bash</code> or by making the script executable Bash opens a subshell to run the script. Calling the script with the <code>source</code> command assures that the functions are available to the current shell and not a subshell.</p>

<p><img src="https://s3.amazonaws.com/CIS239DL/img/bash_subshell.png" alt="Diagram showing running a script in a shell vs. a subshell." title=""></p>

<p>You can demonstrate this by creating a simple script that prints a message to the console and then exits.</p>



<pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-shebang">#!/bin/bash
</span>
<span class="hljs-built_in">echo</span> Bye now

<span class="hljs-keyword">exit</span></code></pre>

<p>Run the script first with <code>source</code>.</p>



<pre class="prettyprint"><code class="language-bash hljs ">$ <span class="hljs-built_in">source</span> exit.sh</code></pre>

<p>then with <code>bash</code></p>



<pre class="prettyprint"><code class="language-bash hljs ">$ bash exit.sh</code></pre>

<p>Since <code>source</code> runs the script in the same shell the <code>exit</code> command exits from the shell. Run from <code>bash</code> the script runs in a subshell than returns to the main shell. The shell remains open.</p>



<h2 id="make-functions-and-custom-commands-available">Make Functions and Custom Commands Available</h2>

<p>To have functions available after login you can put the functions in ~/.bashrc or source a separate function library. On Ubuntu the file is named ~/.bash_aliases`.</p>



<h2 id="what-to-submit">What to Submit</h2>

<p>Take the script from Assignment 1 and re-write the read statements as functions. Call the function in place of the read statement.</p>

<h2 id="resources">Resources</h2>

<ul>
<li><a href="http://mywiki.wooledge.org/BashGuide/CompoundCommands#Functions">Gregâ€™s Bash Guide</a></li>
</ul>

<p></p>